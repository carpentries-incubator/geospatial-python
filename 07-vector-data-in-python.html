<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Introduction to Geospatial Raster and Vector Data with Python: Vector data in Python</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/incubator/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicons/incubator/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicons/incubator/favicon-16x16.png"><link rel="manifest" href="favicons/incubator/site.webmanifest"><link rel="mask-icon" href="favicons/incubator/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Carpentries Incubator" src="assets/images/incubator-logo.svg"><span class="badge text-bg-info">
          <abbr title="This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-circle" style="border-radius: 5px"></i>
              Beta
            </a>
            <span class="visually-hidden">This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>


      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/07-vector-data-in-python.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Carpentries Incubator" src="assets/images/incubator-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Introduction to Geospatial Raster and Vector Data with Python
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Introduction to Geospatial Raster and Vector Data with Python
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"></ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Introduction to Geospatial Raster and Vector Data with Python
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 41%" class="percentage">
    41%
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: 41%" aria-valuenow="41" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/07-vector-data-in-python.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-intro-raster-data.html">1. Introduction to Raster Data</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-intro-vector-data.html">2. Introduction to Vector Data</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-crs.html">3. Coordinate Reference Systems</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-geo-landscape.html">4. The Geospatial Landscape</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-access-data.html">5. Access satellite imagery using Python</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-raster-intro.html">6. Read and visualize raster data</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        7. Vector data in Python
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#introduction">Introduction</a></li>
<li><a href="#get-the-administration-boundary-of-study-area">Get the administration boundary of study area</a></li>
<li><a href="#get-the-vital-infrastructure-and-built-up-areas">Get the vital infrastructure and built-up areas</a></li>
<li><a href="#merge-the-infrastructure-regions-and-built-up-regions">Merge the infrastructure regions and built-up regions</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-crop-raster-data.html">8. Crop raster data with rioxarray and geopandas</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="09-raster-calculations.html">9. Raster Calculations in Python</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="10-zonal-statistics.html">10. Calculating Zonal Statistics on Rasters</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush12">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading12">
        <a href="11-parallel-raster-computations.html">11. Parallel raster computations using Dask</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush13">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading13">
        <a href="12-data-cube.html">12. Data cubes with ODC-STAC</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>

                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="06-raster-intro.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="08-crop-raster-data.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="06-raster-intro.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Read and visualize
        </a>
        <a class="chapter-link float-end" href="08-crop-raster-data.html" rel="next">
          Next: Crop raster data...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Vector data in Python</h1>
        <p>Last updated on 2025-05-20 |

        <a href="https://github.com/carpentries-incubator/geospatial-python/edit/main/episodes/07-vector-data-in-python.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>How can I read, inspect, and process spatial objects, such as
points, lines, and polygons?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Load spatial objects.</li>
<li>Select the spatial objects within a bounding box.</li>
<li>Perform a CRS conversion of spatial objects.</li>
<li>Select features of spatial objects.</li>
<li>Match objects in two datasets based on their spatial
relationships.</li>
</ul></div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a></h2>
<hr class="half-width"><p>In the preceding episodes, we have prepared, selected and downloaded
raster data from before and after the wildfire event in the summer of
2023 on the Greek island of Rhodes. To evaluate the impact of this
wildfire on the vital infrastructure and built-up areas we are going to
create a subset of vector data representing these assets. In this
episode you will learn how to extract vector data with specific
characteristics like the type of attributes or their locations. The
dataset that we will generate in this episode can lateron be confronted
with scorched areas which we determine by analyzing the satellite images
<a href="09-raster-calculations.html">Episode 9: Raster Calculations in
Python</a>.</p>
<p>We’ll be examining vector datasets that represent the valuable
assests of Rhodes. As mentioned in <a href="02-intro-vector-data.html">Episode 2: Introduction to Vector
Data</a>, vector data uses points, lines, and polygons to depict
specific features on the Earth’s surface. These geographic elements can
have one or more attributes, like ‘name’ and ‘population’ for a city. In
this episode we’ll be using two open data sources: the Database of
Global Administrative Areas (GADM) dataset to generate a polygon for the
island of Rhodes and and Open Street Map data for the vital
infrastructure and valuable assets.</p>
<p>To handle the vector data in python we use the package <a href="https://geopandas.org/en/stable/" class="external-link"><code>geopandas</code></a>. This
package allows us to open, manipulate, and write vector dataset through
python.</p>
<figure><img src="fig/E07/pandas_geopandas_relation.png" alt="Pandas and Geopandas" class="figure mx-auto d-block"></figure><p><code>geopandas</code> enhances the widely-used <code>pandas</code>
library for data analysis by extending its functionality to geospatial
applications. The primary <code>pandas</code> objects
(<code>Series</code> and <code>DataFrame</code>) are extended to
<code>geopandas</code> objects (<code>GeoSeries</code> and
<code>GeoDataFrame</code>). This extension is achieved by incorporating
geometric types, represented in Python using the <code>shapely</code>
library, and by offering dedicated methods for spatial operations like
<code>union</code>, <code>spatial joins</code> and
<code>intersect</code>. In order to understand how geopandas works, it
is good to provide a brief explanation of the relationship between
<code>Series</code>, a <code>DataFrame</code>, <code>GeoSeries</code>,
and a <code>GeoDataFrame</code>:</p>
<ul><li>A <code>Series</code> is a one-dimensional array with an axis that
can hold any data type (integers, strings, floating-point numbers,
Python objects, etc.)</li>
<li>A <code>DataFrame</code> is a two-dimensional labeled data structure
with columns that can potentially hold different types of data.</li>
<li>A <code>GeoSeries</code> is a <code>Series</code> object designed to
store shapely geometry objects.</li>
<li>A <code>GeoDataFrame</code> is an extended
<code>pandas.DataFrame</code> that includes a column with geometry
objects, which is a <code>GeoSeries</code>.</li>
</ul><div id="introduce-the-vector-data" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="introduce-the-vector-data" class="callout-inner">
<h3 class="callout-title">Introduce the Vector Data</h3>
<div class="callout-content">
<p>In this episode, we will use the downloaded vector data from the
<code>data</code> directory. Please refer to the <a href="index.html#setup">setup page</a> on where to download the data. Note
that we manipulated that data a little for the purposes of this
workshop. The link to the original source can be found on the <a href="index.html#setup">setup page</a>.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="get-the-administration-boundary-of-study-area">Get the administration boundary of study area<a class="anchor" aria-label="anchor" href="#get-the-administration-boundary-of-study-area"></a></h2>
<hr class="half-width"><p>The first thing we want to do is to extract a polygon containing the
boundary of the island of Rhodes from Greece. For this we will use the
<a href="https://gadm.org/download_country.html" class="external-link">GADM dataset</a> layer
<code>ADM_ADM_3.gpkg</code> for Greece. For your convenience we saved a
copy at: <code>data/data/gadm/ADM_ADM_3.gpkg</code> We will use the
<code>geopandas</code> package to load the file and use the
<code>read_file</code> function <a href="https://geopandas.org/en/stable/docs/user_guide/io.html" class="external-link">see</a>.
Note that geopandas is often abbreviated as gpd.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>gdf_greece <span class="op">=</span> gpd.read_file(<span class="st">'data/gadm/ADM_ADM_3.gpkg'</span>)</span></code></pre>
</div>
<p>We can print out the <code>gdf_greece</code>variable:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>gdf_greece</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>GID_3 GID_0 COUNTRY    GID_1                       NAME_1  \
0     GRC.1.1.1_1   GRC  Greece  GRC.1_1                       Aegean
1     GRC.1.1.2_1   GRC  Greece  GRC.1_1                       Aegean
2     GRC.1.1.3_1   GRC  Greece  GRC.1_1                       Aegean
..            ...   ...     ...      ...                          ...
324  GRC.8.2.24_1   GRC  Greece  GRC.8_1  Thessaly and Central Greece
325  GRC.8.2.25_1   GRC  Greece  GRC.8_1  Thessaly and Central Greece

                      NL_NAME_1      GID_2        NAME_2      NL_NAME_2  \
0                        Αιγαίο  GRC.1.1_1  North Aegean  Βόρειο Αιγαίο
1                        Αιγαίο  GRC.1.1_1  North Aegean  Βόρειο Αιγαίο
2                        Αιγαίο  GRC.1.1_1  North Aegean  Βόρειο Αιγαίο
..                          ...        ...           ...            ...
324  Θεσσαλία και Στερεά Ελλάδα  GRC.8.2_1      Thessaly       Θεσσαλία
325  Θεσσαλία και Στερεά Ελλάδα  GRC.8.2_1      Thessaly       Θεσσαλία
...
324  POLYGON ((22.81903 39.27344, 22.81884 39.27332...
325  POLYGON ((23.21375 39.36514, 23.21272 39.36469...

[326 rows x 17 columns]</code></pre>
</div>
<p>The data are read into the variable fields as a
<code>GeoDataFrame</code>. This is an extened data format of
<code>pandas.DataFrame</code>, with an extra column
<code>geometry</code>. To explore the dataframe you can call this
variable just like a <code>pandas dataframe</code> by using functions
like <code>.shape</code>, <code>.head</code> and <code>.tail</code>
etc.</p>
<p>To visualize the polygons we can use the <a href="https://geopandas.org/en/stable/docs/user_guide/mapping.html" class="external-link"><code>plot()</code></a>
function to the <code>GeoDataFrame</code> we have loaded
<code>gdf_greece</code>:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>gdf_greece.plot()</span></code></pre>
</div>
<figure><img src="fig/E07/greece_administration_areas.png" alt="greece_administrations" class="figure mx-auto d-block"></figure><p>If you want to interactively explore your data you can use the <a href="https://geopandas.org/en/stable/docs/user_guide/interactive_mapping.html" class="external-link"><code>.explore</code></a>
function in geopandas:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>gdf_greece.explore()</span></code></pre>
</div>
<p>In this interactive map you can easily zoom in and out and hover over
the polygons to see which attributes, stored in the rows of your
GeoDataFrame, are related to each polygon.</p>
<p>Next, we’ll focus on isolating the administrative area of Rhodes
Island. Once you hover over the polygon of Rhodos (the relatively big
island to the east) you will find out that the label <code>Rhodos</code>
is stored in the <code>NAME_3</code> column of <code>gdf_greece</code>,
where Rhodes Island is listed as <code>Rhodos</code>. Since our goal is
to have a boundary of Rhodes, we’ll now create a new variable that
exclusively represents Rhodes Island.</p>
<p>To select an item in our GeoDataFrame with a specific value is done
the same way in which this is done in a pandas <code>DataFrame</code>
using <a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.loc.html" class="external-link"><code>.loc</code></a>.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>gdf_rhodes <span class="op">=</span> gdf_greece.loc[gdf_greece[<span class="st">'NAME_3'</span>]<span class="op">==</span><span class="st">'Rhodos'</span>]</span></code></pre>
</div>
<p>And we can plot the overview by (or show it interactively using
<code>.explore</code>):</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>gdf_rhodes.plot()</span></code></pre>
</div>
<figure><img src="fig/E07/rhodes_administration_areas.png" alt="rhodes_administrations" class="figure mx-auto d-block"></figure><p>Now that we have the administrative area of Rhodes Island. We can use
the <code>to_file()</code> function save this file for future use.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>gdf_rhodes.to_file(<span class="st">'rhodes.gpkg'</span>)</span></code></pre>
</div>
</section><section><h2 class="section-heading" id="get-the-vital-infrastructure-and-built-up-areas">Get the vital infrastructure and built-up areas<a class="anchor" aria-label="anchor" href="#get-the-vital-infrastructure-and-built-up-areas"></a></h2>
<hr class="half-width"><div class="section level3">
<h3 id="road-data-from-open-street-map-osm">Road data from Open Street Map (OSM)<a class="anchor" aria-label="anchor" href="#road-data-from-open-street-map-osm"></a></h3>
<p>Now that we have the boundary of our study area, we will make use
this to select the main roads in our study area. We will make the
following processing steps:</p>
<ol style="list-style-type: decimal"><li>Select roads of study area</li>
<li>Select key infrastruture: ‘primary’, ‘secondary’, ‘tertiary’</li>
<li>Create a 100m buffer around the rounds. This buffer will be regarded
as the infrastructure region. (note that this buffer is arbitrary and
can be changed afterwards if you want!)</li>
</ol><div class="section level4">
<h4 id="step-1-select-roads-of-study-area">Step 1: Select roads of study area<a class="anchor" aria-label="anchor" href="#step-1-select-roads-of-study-area"></a></h4>
<p>For this workshop, in particular to not have everyone downloading too
much data, we created a subset of the <a href="https://www.openstreetmap.org/" class="external-link">Openstreetmap</a> data we
downloaded for Greece from <a href="https://download.geofabrik.de/europe.html" class="external-link">the Geofabrik</a>. This
data comes in the form of a shapefile (see <a href="02-intro-vector-data.html">episode 2</a>) from which we extracted
all the roads for <code>Rhodes</code> and some surrounding islands. The
data is stored in the osm folder as <code>osm_roads.gpkg</code>, but
contains <em>all</em> the roads on the island (so also hiking paths,
private roads etc.), whereas we in particular are interested in the key
infrastructure which we consider to be roads classified as primary,
secondary or tertiary roads.</p>
<p>Let’s load the file and plot it:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>gdf_roads <span class="op">=</span> gpd.read_file(<span class="st">'data/osm/osm_roads.gpkg'</span>)</span></code></pre>
</div>
<p>We can explore it using the same commands as above:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>gdf_roads.plot()</span></code></pre>
</div>
<figure><img src="fig/E07/greece_highways.png" alt="greece_highways" class="figure mx-auto d-block"></figure><p>As you may have noticed, loading and plotting
<code>osm_roads.gpkg</code> takes a bit long. This is because the file
contains all the roads of Rhodos and some surrounding islands as well.
Since we are only interested in the roads on Rhodes Island. We will use
the <a href="https://geopandas.org/en/stable/docs/user_guide/io.html" class="external-link"><code>mask</code></a>
parameter of the <code>read_file()</code> function to load only the
roads on Rhodes Island.</p>
<p>Now let us overwrite the GeoDataframe <code>gdf_roads</code> using
the mask with the GeoDataFrame <code>gdf_rhodes</code> we created
above.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>gdf_roads <span class="op">=</span> gpd.read_file(<span class="st">'data/osm/osm_roads.gpkg'</span>, mask<span class="op">=</span>gdf_rhodes)</span></code></pre>
</div>
<p>Now let us explore these roads using <code>.explore</code> (or
<code>.plot</code>):</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>gdf_roads.explore()</span></code></pre>
</div>
<figure><img src="fig/E07/rhodes_highways.png" alt="rhodes_highways" class="figure mx-auto d-block"></figure></div>
<div class="section level4">
<h4 id="step-2-select-key-infrastruture">Step 2: Select key infrastruture<a class="anchor" aria-label="anchor" href="#step-2-select-key-infrastruture"></a></h4>
<p>As you will find out while exploring the roads dataset, information
about the type of roads is stored in the <code>fclass</code> column. To
get an overview of the different values that are present in the collumn
<code>fclass</code> , we can use the <a href="https://pandas.pydata.org/docs/reference/api/pandas.unique.html" class="external-link"><code>unique()</code></a>
function from pandas:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>gdf_roads[<span class="st">'fclass'</span>].unique()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>array(['residential', 'service', 'unclassified', 'footway',
       'track_grade4', 'primary', 'track', 'tertiary', 'track_grade3',
       'path', 'track_grade5', 'steps', 'secondary', 'primary_link',
       'track_grade2', 'track_grade1', 'pedestrian', 'tertiary_link',
       'secondary_link', 'living_street', 'cycleway'], dtype=object)</code></pre>
</div>
<p>It seems the variable <code>gdf_roads</code> contains all kind of
hiking paths and footpaths as well. Since we are only interested in
vital infrastructure, classified as “primary”, “secondary” and
“tertiary” roads, we need to make a subselection.</p>
<p>Let us first create a list with the labels we want to select.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>key_infra_labels <span class="op">=</span> [<span class="st">'primary'</span>, <span class="st">'secondary'</span>, <span class="st">'tertiary'</span>]</span></code></pre>
</div>
<p>Now we are using this list make a subselection of the key
infrastructure using pandas´ <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.isin.html" class="external-link"><code>.isin</code>
function</a>.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>key_infra <span class="op">=</span> gdf_roads[gdf_roads[<span class="st">'fclass'</span>].isin(key_infra_labels)]</span></code></pre>
</div>
<p>We can plot the key infrastructure :</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>key_infra.plot()</span></code></pre>
</div>
<figure><img src="fig/E07/rhodes_infra_highways.png" alt="rhodes_infra_highways" class="figure mx-auto d-block"></figure></div>
<div class="section level4">
<h4 id="step-3-create-a-100m-buffer-around-the-key-infrastructure">Step 3: Create a 100m buffer around the key infrastructure<a class="anchor" aria-label="anchor" href="#step-3-create-a-100m-buffer-around-the-key-infrastructure"></a></h4>
<p>Now that we selected the key infrastructure, we want to create a 100m
buffer around them. This buffer will be regarded as the infrastructure
region.</p>
<p>As you might have notice, the numbers on the x and y axis of our
plots represent Lon Lat coordinates, meaning that the data is not yet
projected. The current data has a geographic coordinate system with
measures in degrees but not meter. Creating a buffer of 100 meters is
not possible. Therfore, in order to create a 100m buffer, we first need
to project our data. In our case we decided to project the data as WGS
84 / UTM zone 31N, with EPSG code 32631 (<a href="/episodes/03-crs.html">see chapter 03 for more information about
the CRS and EPSG codes</a>.</p>
<p>To project our data we use <a href="https://geopandas.org/en/stable/docs/reference/api/geopandas.GeoDataFrame.to_crs.html" class="external-link">.to_crs</a>.
We first define a variable with the EPSG value (in our case 32631),
which we then us in the to_crs function.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>epsg_code <span class="op">=</span> <span class="dv">32631</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>key_infra_meters <span class="op">=</span> key_infra.to_crs(epsg_code)</span></code></pre>
</div>
<p>Now that our data is projected, we can create a buffer. For this we
make use of <a href="https://geopandas.org/en/stable/docs/user_guide/geometric_manipulations.html#GeoSeries.buffer" class="external-link">geopandas´
.buffer function</a> :</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>key_infra_meters_buffer <span class="op">=</span> key_infra_meters.<span class="bu">buffer</span>(<span class="dv">100</span>)</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>key_infra_meters_buffer</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>53       POLYGON ((2779295.383 4319805.295, 2779317.029...
54       POLYGON ((2779270.962 4319974.441, 2779272.393...
55       POLYGON ((2779172.341 4319578.062, 2779165.312...
84       POLYGON ((2779615.109 4319862.058, 2779665.519...
140      POLYGON ((2781330.698 4320046.538, 2781330.749...
                               ...
19020    POLYGON ((2780193.230 4337691.133, 2780184.279...
19021    POLYGON ((2780330.823 4337772.262, 2780324.966...
19022    POLYGON ((2780179.850 4337917.135, 2780188.871...
19024    POLYGON ((2780516.550 4339028.863, 2780519.340...
19032    POLYGON ((2780272.050 4338213.937, 2780274.519...
Length: 1386, dtype: geometry</code></pre>
</div>
<p>Note that the type of the <code>key_infra_meters_buffer</code> is a
<code>GeoSeries</code> and not a <code>GeoDataFrame</code>. This is
because the <code>buffer()</code> function returns a
<code>GeoSeries</code> object. You can check that by calling the type of
the variable.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="bu">type</span>(key_infra_meters_buffer)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">geopandas.geoseries.GeoSeries</span></span></code></pre>
</div>
<p>Now that we have a buffer, we can convert it back to the geographic
coordinate system to keep the data consistent. Note that we are now
using the crs information from the <code>key_infra</code>, instead of
using the EPSG code directly (EPSG:4326):</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>key_infra_buffer <span class="op">=</span> key_infra_meters_buffer.to_crs(key_infra.crs)</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>key_infra_buffer</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>45       POLYGON ((27.72826 36.12409, 27.72839 36.12426...
58       POLYGON ((27.71666 36.11678, 27.71665 36.11678...
99       POLYGON ((27.75485 35.95242, 27.75493 35.95248...
100      POLYGON ((27.76737 35.95086, 27.76733 35.95086...
108      POLYGON ((27.76706 35.95199, 27.76702 35.95201...
                               ...
18876    POLYGON ((28.22855 36.41890, 28.22861 36.41899...
18877    POLYGON ((28.22819 36.41838, 28.22825 36.41845...
18878    POLYGON ((28.22865 36.41904, 28.22871 36.41912...
18879    POLYGON ((28.23026 36.41927, 28.23034 36.41921...
18880    POLYGON ((28.23020 36.41779, 28.23007 36.41745...
Length: 1369, dtype: geometry</code></pre>
</div>
<p>As you can see, the buffers created in <code>key_infra_buffer</code>
have the <code>Polygon</code> geometry type.</p>
<p>To double check the EPSG code of key_infra:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="bu">print</span>(key_infra.crs)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">EPSG</span><span class="op">:</span><span class="fl">4326</span></span></code></pre>
</div>
<p>Reprojecting and buffering our data is something that we are going to
do multiple times during this episode. To avoid have to call the same
functions multiple times it would make sense to create a function.
Therefore, let us create a function in which we can add the buffer as a
variable.</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="kw">def</span> buffer_crs(gdf, size, meter_crs<span class="op">=</span><span class="dv">32631</span>, target_crs<span class="op">=</span><span class="dv">4326</span>):</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a>    <span class="cf">return</span> gdf.to_crs(meter_crs).<span class="bu">buffer</span>(size).to_crs(target_crs)</span></code></pre>
</div>
<p>For example, we can use this function to create a 200m buffer around
the infrastructure the key infrastructure by doing:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>key_infra_buffer_200 <span class="op">=</span> buffer_crs(key_infra, <span class="dv">200</span>)</span></code></pre>
</div>
</div>
</div>
<div class="section level3">
<h3 id="get-built-up-regions-from-open-street-map-osm">Get built-up regions from Open Street Map (OSM)<a class="anchor" aria-label="anchor" href="#get-built-up-regions-from-open-street-map-osm"></a></h3>
<p>Now that we have a buffered dataset for the key infrastructure of
Rhodes, our next step is to create a dataset with all the built-up
areas. To do so we will use the land use data from OSM, which we
prepared for you in the file <code>data/osm_landuse.gpkg</code>. This
file includes the land use data for the entire Greece. We assume the
built-up regions to be the union of three types of land use:
“commercial”, “industrial”, and “residential”.</p>
<p>Note that for the simplicity of this course, we limit the built-up
regions to these three types of land use. In reality, the built-up
regions can be more complex also there is definately more high quality
(e.g. local government).</p>
<p>Now it will be up to you to create a dataset with valueable assets.
You should be able to complete this task by yourself with the knowledge
you have gained from the previous steps and links to the documentation
we provided.</p>
<div id="exercise-get-the-built-up-regions" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-get-the-built-up-regions" class="callout-inner">
<h3 class="callout-title">Exercise: Get the built-up regions</h3>
<div class="callout-content">
<p>Create a <code>builtup_buffer</code> from the file
<code>data/osm/osm_landuse.gpkg</code> by the following steps:</p>
<ol style="list-style-type: decimal"><li>Load the land use data from <code>data/osm/osm_landuse.gpkg</code>
and mask it with the administrative boundary of Rhodes Island
(<code>gdf_rhodes</code>).</li>
<li>Select the land use data for “commercial”, “industrial”, and
“residential”.</li>
<li>Create a 10m buffer around the land use data.</li>
<li>Visualize the results.</li>
</ol><p>After completing the exercise, answer the following questions:</p>
<ol style="list-style-type: decimal"><li>How many unique land use types are there in
<code>osm_landuse.gpkg</code>?</li>
<li>After selecting the three types of land use, how many entries (rows)
are there in the results?</li>
</ol><p>Hints:</p>
<ul><li>
<code>data/osm_landuse.gpkg</code> contains the land use data for
the entire Greece. Use the administrative boundary of Rhodes Island
(<code>gdf_rhodes</code>) to select the land use data for Rhodes
Island.</li>
<li>The land use attribute is stored in the <code>fclass</code>
column.</li>
<li>Reuse <code>buffer_crs</code> function to create the buffer.</li>
</ul></div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="co"># Read data with a mask of Rhodes</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a>gdf_landuse <span class="op">=</span> gpd.read_file(<span class="st">'./data/osm/osm_landuse.gpkg'</span>, mask<span class="op">=</span>gdf_rhodes)</span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a><span class="co"># Find number of unique landuse types</span></span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(gdf_landuse[<span class="st">'fclass'</span>].unique()))</span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a></span>
<span id="cb29-7"><a href="#cb29-7" tabindex="-1"></a><span class="co"># Extract built-up regions</span></span>
<span id="cb29-8"><a href="#cb29-8" tabindex="-1"></a>builtup_labels <span class="op">=</span> [<span class="st">'commercial'</span>, <span class="st">'industrial'</span>, <span class="st">'residential'</span>]</span>
<span id="cb29-9"><a href="#cb29-9" tabindex="-1"></a>builtup <span class="op">=</span> gdf_landuse[gdf_landuse[<span class="st">'fclass'</span>].isin(builtup_labels)]</span>
<span id="cb29-10"><a href="#cb29-10" tabindex="-1"></a></span>
<span id="cb29-11"><a href="#cb29-11" tabindex="-1"></a><span class="co"># Create 10m buffer around the built-up regions</span></span>
<span id="cb29-12"><a href="#cb29-12" tabindex="-1"></a>builtup_buffer <span class="op">=</span> buffer_crs(builtup, <span class="dv">10</span>)</span>
<span id="cb29-13"><a href="#cb29-13" tabindex="-1"></a></span>
<span id="cb29-14"><a href="#cb29-14" tabindex="-1"></a><span class="co"># Get the number of entries</span></span>
<span id="cb29-15"><a href="#cb29-15" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(builtup_buffer))</span>
<span id="cb29-16"><a href="#cb29-16" tabindex="-1"></a></span>
<span id="cb29-17"><a href="#cb29-17" tabindex="-1"></a><span class="co"># Visualize the buffer</span></span>
<span id="cb29-18"><a href="#cb29-18" tabindex="-1"></a>builtup_buffer.plot()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">19</span></span>
<span><span class="fl">1349</span></span></code></pre>
</div>
<figure><img src="fig/E07/rhodes_builtup_buffer.png" alt="rhodes_builtup_buffer" class="figure mx-auto d-block"></figure></div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="merge-the-infrastructure-regions-and-built-up-regions">Merge the infrastructure regions and built-up regions<a class="anchor" aria-label="anchor" href="#merge-the-infrastructure-regions-and-built-up-regions"></a></h2>
<hr class="half-width"><p>Now that we have the infrastructure regions and built-up regions, we
can merge them into a single region. We would like to keep track of the
type after merging, so we will add two new columns: <code>type</code>
and <code>code</code> by converting the <code>GeoSeries</code> to
<code>GeoDataFrame</code>.</p>
<p>First we convert the buffer around key infrastructure:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a>data <span class="op">=</span> {<span class="st">'geometry'</span>: key_infra_buffer, <span class="st">'type'</span>: <span class="st">'infrastructure'</span>, <span class="st">'code'</span>: <span class="dv">1</span>}</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a>gdf_infra <span class="op">=</span> gpd.GeoDataFrame(data)</span></code></pre>
</div>
<p>Then we convert the built-up buffer:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a>data <span class="op">=</span> {<span class="st">'geometry'</span>: builtup_buffer, <span class="st">'type'</span>: <span class="st">'builtup'</span>, <span class="st">'code'</span>: <span class="dv">2</span>}</span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a>gdf_builtup <span class="op">=</span> gpd.GeoDataFrame(data)</span></code></pre>
</div>
<p>After that, we can merge the two <code>GeoDataFrame</code> into
one:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a>gdf_assets <span class="op">=</span> pd.concat([gdf_infra, gdf_builtup]).reset_index(drop<span class="op">=</span><span class="va">True</span>)</span></code></pre>
</div>
<p>In <code>gdf_assets</code>, we can distinguish the infrastructure
regions and built-up regions by the <code>type</code> and
<code>code</code> columns. We can plot the <code>gdf_assets</code> to
visualize the merged regions. See the <a href="https://geopandas.org/en/stable/docs/user_guide/mapping.html" class="external-link">geopandas
documentation</a> on how to do this:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a>gdf_assets.plot(column<span class="op">=</span><span class="st">'type'</span>, legend<span class="op">=</span><span class="va">True</span>)</span></code></pre>
</div>
<figure><img src="fig/E07/rhodes_assets.png" alt="rhodes_assets" class="figure mx-auto d-block"></figure><p>Finally, we can save the <code>gdf_assets</code> to a file for future
use:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a>gdf_assets.to_file(<span class="st">'assets.gpkg'</span>)</span></code></pre>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul><li>Load spatial objects into Python with
<code>geopandas.read_file()</code> function.</li>
<li>Spatial objects can be plotted directly with
<code>GeoDataFrame</code>’s <code>.plot()</code> method.</li>
<li>Convert CRS of spatial objects with <code>.to_crs()</code>. Note
that this generates a <code>GeoSeries</code> object.</li>
<li>Create a buffer of spatial objects with <code>.buffer()</code>.</li>
<li>Merge spatial objects with <code>pd.concat()</code>.</li>
</ul></div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="06-raster-intro.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="08-crop-raster-data.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="06-raster-intro.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Read and visualize
        </a>
        <a class="chapter-link float-end" href="08-crop-raster-data.html" rel="next">
          Next: Crop raster data...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/carpentries-incubator/geospatial-python/edit/main/episodes/07-vector-data-in-python.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/carpentries-incubator/geospatial-python/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/carpentries-incubator/geospatial-python/" class="external-link">Source</a></p>
        <p>
        <a href="https://github.com/carpentries-incubator/geospatial-python/blob/main/" class="external-link">Cite</a>
        | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
		</div>
		<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.17.3" class="external-link">sandpaper (0.17.3)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.9" class="external-link">varnish (1.0.9)</a></p>
		</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://carpentries-incubator.github.io/geospatial-python/07-vector-data-in-python.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Vector data in Python",
  "creativeWorkStatus": "active",
  "url": "https://carpentries-incubator.github.io/geospatial-python/07-vector-data-in-python.html",
  "identifier": "https://carpentries-incubator.github.io/geospatial-python/07-vector-data-in-python.html",
  "dateCreated": "2025-05-20",
  "dateModified": "2025-05-20",
  "datePublished": "2026-01-06"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

